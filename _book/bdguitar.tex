\documentclass[openany]{ctexbook}
\usepackage{lmodern}
\usepackage{amssymb,amsmath}
\usepackage{ifxetex,ifluatex}
\usepackage{fixltx2e} % provides \textsubscript
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
\else % if luatex or xelatex
  \ifxetex
    \usepackage{xltxtra,xunicode}
  \else
    \usepackage{fontspec}
  \fi
  \defaultfontfeatures{Ligatures=TeX,Scale=MatchLowercase}
\fi
% use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
% use microtype if available
\IfFileExists{microtype.sty}{%
\usepackage{microtype}
\UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\usepackage[b5paper,tmargin=2.5cm,bmargin=2.5cm,lmargin=3.5cm,rmargin=2.5cm]{geometry}
\usepackage[unicode=true]{hyperref}
\hypersetup{
            pdftitle={Guitar bookdown},
            pdfauthor={大鹏},
            pdfborder={0 0 0},
            breaklinks=true}
\urlstyle{same}  % don't use monospace font for urls
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{{#1}}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{{#1}}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{{#1}}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{{#1}}}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{{#1}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{{#1}}}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{{#1}}}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{{#1}}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{{#1}}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{{#1}}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{{#1}}}
\newcommand{\ImportTok}[1]{{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{{#1}}}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{{#1}}}}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{{#1}}}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{{#1}}}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{{#1}}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{{#1}}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{{#1}}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{{#1}}}}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{{#1}}}}
\newcommand{\BuiltInTok}[1]{{#1}}
\newcommand{\ExtensionTok}[1]{{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{{#1}}}
\newcommand{\RegionMarkerTok}[1]{{#1}}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{{#1}}}}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{{#1}}}}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{{#1}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{{#1}}}}
\newcommand{\NormalTok}[1]{{#1}}
\usepackage{longtable,booktabs}
% Fix footnotes in tables (requires footnote package)
\IfFileExists{footnote.sty}{\usepackage{footnote}\makesavenoteenv{long table}}{}
\IfFileExists{parskip.sty}{%
\usepackage{parskip}
}{% else
\setlength{\parindent}{0pt}
\setlength{\parskip}{6pt plus 2pt minus 1pt}
}
\setlength{\emergencystretch}{3em}  % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{5}
% Redefines (sub)paragraphs to behave more like sections
\ifx\paragraph\undefined\else
\let\oldparagraph\paragraph
\renewcommand{\paragraph}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
\let\oldsubparagraph\subparagraph
\renewcommand{\subparagraph}[1]{\oldsubparagraph{#1}\mbox{}}
\fi

% set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother

\usepackage{booktabs}
\usepackage{longtable}

\usepackage{framed,color}
\definecolor{shadecolor}{RGB}{248,248,248}

\renewcommand{\textfraction}{0.05}
\renewcommand{\topfraction}{0.8}
\renewcommand{\bottomfraction}{0.8}
\renewcommand{\floatpagefraction}{0.75}

\let\oldhref\href
\renewcommand{\href}[2]{#2\footnote{\url{#1}}}

\makeatletter
\newenvironment{kframe}{%
\medskip{}
\setlength{\fboxsep}{.8em}
 \def\at@end@of@kframe{}%
 \ifinner\ifhmode%
  \def\at@end@of@kframe{\end{minipage}}%
  \begin{minipage}{\columnwidth}%
 \fi\fi%
 \def\FrameCommand##1{\hskip\@totalleftmargin \hskip-\fboxsep
 \colorbox{shadecolor}{##1}\hskip-\fboxsep
     % There is no \\@totalrightmargin, so:
     \hskip-\linewidth \hskip-\@totalleftmargin \hskip\columnwidth}%
 \MakeFramed {\advance\hsize-\width
   \@totalleftmargin\z@ \linewidth\hsize
   \@setminipage}}%
 {\par\unskip\endMakeFramed%
 \at@end@of@kframe}
\makeatother


\usepackage{makeidx}
\makeindex

\urlstyle{tt}

\usepackage{amsthm}
\makeatletter
\def\thm@space@setup{%
  \thm@preskip=8pt plus 2pt minus 4pt
  \thm@postskip=\thm@preskip
}
\makeatother


\usepackage{xunicode}
\usepackage{fontspec}
\defaultfontfeatures{Mapping=tex-text}
\setmainfont{Microsoft YaHei}


%\usepackage{geometry}
%\setlength{\parindent}{0pt}
%\setlength{\textwidth}{7.2in}

\usepackage{gchords}

\newcommand\mychords{
\def\chordsize{1.6mm}   % distance between two frets (and two strings)
\font\fingerfont=cmr5  % font used for numbering fingers
\font\namefont=cmr10    % font used for labeling of the chord
\font\fretposfont=cmr7  % font used for the fret position marker
\def\dampsymbol{{\tiny$\scriptstyle\times$}} %  `damp this string' marker
}

\renewcommand\yoff{3}
\renewcommand\fingsiz{1.6}

\newcommand{\AsevenMaj}{\chord{t}{x,n,p2,p1,p2,n}{A7+}}
\newcommand{\Aseven}{\chord{t}{x,n,p2,n,p2,n}{A7}}
\newcommand{\A}{\chord{t}{x,n,p2,p2,p2,n}{A}}
\newcommand{\Am}{\chord{t}{n,n,p2,p2,p1,n}{Am}}
\newcommand{\Amfive}{\chord{{5~}}{p1,p3,p3,p1,p1,p1}{Am(5)}}
\newcommand{\Bb}{\chord{t}{f1p1,f1p1,p3,p3,p3,f1p1}{$^b$B}}
\newcommand{\BmseveN}{\chord{t}{x,p2,p4,p3,p3,p2}{Bm7+}}
\newcommand{\BmsevenA}{\chord{t}{x,n,p4,p4,p3,n}{Bm/A}}
\newcommand{\Bmseven}{\chord{t}{x,p2,p4,p2,p3,p2}{Bm7}}
\newcommand{\Bm}{\chord{t}{x,p2,p4,p4,p3,p2}{Bm}}
\newcommand{\BM}{\chord{t}{f1p2,f1p2,p4,p4,p4,f1p2}{B}}
\newcommand{\Bseven}{\chord{t}{x,f1p2,p4,f1p2,p4,f1p2,}{B7}}
\newcommand{\BMseven}{\chord{t}{n,p2,p1,p2,n,p2}{B7}}
\newcommand{\BsevenBasDs}{\chord{t}{x,x,p1,p2,n,p2}{B7/D\#}}
\newcommand{\CM}{\chord{t}{n,p3,p2,n,p1,n}{C}}
\newcommand{\CssevenLight}{\chord{t}{x,p4,p3,p4,p2,x}{C\#7}}
\newcommand{\Csthree}{\chord{{4~}}{f1p1,f1p1,p3,p3,p3,f1p1}{$^\#$C}}
\newcommand{\Cthree}{\chord{{3~}}{f1p1,f1p1,p3,p3,p3,f1p1}{C(3)}}
\newcommand{\Cseven}{\chord{t}{n,p3,p2,p3,p1,n}{C7}}
\newcommand{\Cm}{\chord{t}{f1p3,f1p3,p5,p5,p4,f1p3}{Cm}}
\newcommand{\Csm}{\chord{{4~}}{f1p1,f1p1,p3,p3,p2,f1p1}{\#Cm}}
\newcommand{\DmBasB}{\chord{t}{x,p2,p3,p2,p3,x}{Dm/B}}
\newcommand{\DseveN}{\chord{t}{x,x,n,p2,p2,p2}{D7+}}
\newcommand{\Dseven}{\chord{t}{x,x,n,p2,p1,p2}{D7}}
\newcommand{\Dsix}{\chord{t}{x,x,n,p2,n,p2}{D6}}
\newcommand{\D}{\chord{t}{x,x,n,p2,p3,p2}{D}}
\newcommand{\Dm}{\chord{t}{x,x,n,p2,p3,p1}{Dm}}
\newcommand{\Eb}{\chord{{6~}}{f1p1,f1p1,p3,p3,p3,f1p1}{$^b$E}}
\newcommand{\E}{\chord{t}{n,p2,p2,p1,n,n}{E}}
\newcommand{\Eseven}{\chord{{7~}}{f1p1,f1p1,p3,p3,p3,f1p1}{E(7)}}
\newcommand{\EseveNNine}{\chord{t}{n,f1p2,f1p2,p4,p3,f1p2,}{E79}}
\newcommand{\EseveN}{\chord{t}{n,p2,p2,p4,p3,p4}{E7}}
\newcommand{\EsevenFour}{\chord{t}{n,p2,p2,p4,p3,p5}{E7,11}}
\newcommand{\Em}{\chord{t}{n,p2,p2,n,n,n}{Em}}
\newcommand{\F}{\chord{t}{f1p1,p3,p3,p2,f1p1,f1p1}{F}}
\newcommand{\Fs}{\chord{t}{f2p2,p4,p4,p3,f1p2,f1p2}{F\#}}
\newcommand{\Fsmin}{\chord{t}{f1p2,p4,p4,f1p2,f1p2,f1p2,}{F\#m}}
\newcommand{\FsminLight}{\chord{t}{x,x,f3p4,f1p2,f1p2,f1p2,}{F\#m}}
\newcommand{\FsminBasSeveN}{\chord{t}{x,x,f3p3,f1p2,f1p2,f1p2,}{F\#m/E\#}}
\newcommand{\FsminBasSeven}{\chord{t}{x,x,f2p2,f1p2,f1p2,f1p2,}{F\#m/E}}
\newcommand{\FsminSeven}{\chord{t}{f1p2,p4,p4,f1p2,p5,f1p2,}{F\#7m}}
\newcommand{\GM}{\chord{t}{p3,p2,n,n,n,p3}{G}}
\newcommand{\Gsminseven}{\chord{t}{f2p4,x,f4p4,f4p4,f4p4,f4p4,}{G\#7}}
\newcommand{\Gthree}{\chord{t}{f1p3,p5,p5,p4,f1p3,f1p3}{G(3)}}
\newcommand{\Gm}{\chord{{3~}}{f1p1,p3,p3,f1p1,f1p1,f1p1}{Gm}}
\newcommand{\Gsm}{\chord{{4~}}{f1p1,p3,p3,f1p1,f1p1,f1p1}{\#Gm}}

\frontmatter

\title{Guitar bookdown}
\author{大鹏}
\date{2017-04-06}

\begin{document}
\maketitle

\thispagestyle{empty}

\setlength{\abovedisplayskip}{-5pt}
\setlength{\abovedisplayshortskip}{-5pt}

\mychords

{
\setcounter{tocdepth}{1}
\tableofcontents
}
\chapter*{前言}\label{front}
\addcontentsline{toc}{chapter}{前言}

最真的梦，就是用R语言的bookdown把吉他谱跟R作图弄到一起。

啥？弄到一起有什么用？

呃\ldots{}\ldots{}容我清清脑子想一想\ldots{}\ldots{}

\begin{quote}
--- 大鹏
\end{quote}

\begin{Shaded}
\begin{Highlighting}[]
 \KeywordTok{persp}\NormalTok{(x, y, z, }\DataTypeTok{theta =} \DecValTok{120}\NormalTok{, }\DataTypeTok{phi =} \DecValTok{15}\NormalTok{, }\DataTypeTok{scale =} \OtherTok{FALSE}\NormalTok{, }
       \DataTypeTok{axes =} \OtherTok{FALSE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=0.6\linewidth]{bdguitar_files/figure-latex/unnamed-chunk-1-1}

终会有\Am 一天　把心愿\Dm 完成　

带着你\F 飞奔\GM 找永\Cm 恒\Csthree \Cthree  

\mainmatter

\part{最真的梦}\label{true-dream}

\chapter*{成都}\label{cd}
\addcontentsline{toc}{chapter}{成都}

作词：赵雷，作曲：赵雷，编曲：赵雷、喜子。

前奏：\CM

让\upchord\CM 我掉下\upchord\Em 眼泪的　不\upchord\F 只昨夜的\upchord\GM 酒　

让\upchord\CM 我依依\upchord\Em 不舍的　不\upchord\F 只你的温\upchord\GM 柔

余\upchord\Em 路还要\upchord\Am 走多久　你\upchord\F 攥着\upchord\GM 我的\upchord\CM 手

让\upchord\Em 我感到\upchord\F 为难的　是\upchord\GM 挣扎\upchord\CM 的自由

分\upchord\CM 别总是\upchord\Em 在九月　回\upchord\F 忆是思念的\upchord\GM 愁

深\upchord\CM 秋嫩绿的\upchord\Em 垂柳　亲\upchord\F 吻着我额\upchord\GM 头

在\upchord\Em 那座阴雨的\upchord\Am 小城里　我\upchord\F 从未\upchord\GM 忘记\upchord\CM 你

成\upchord\Em 都　带不\upchord\F 走的 \upchord\GM 只有\upchord\CM 你
\upchord\Cseven

和\upchord\Em 我在成都的\upchord\Am 街头走一\upchord\F 走　呜\upchord\GM 哦呜\upchord\CM 哦

直\upchord\Em 到所有的\upchord\Am 灯都熄灭\upchord\F 了也\upchord\GM 不停\upchord\CM 留

你会\upchord\F 挽着\upchord\GM 我的衣\upchord\CM 袖　我会\upchord\F 把手\upchord\GM 揣进裤\upchord\CM 兜

走\upchord\Dm 到玉林路的尽头　坐\upchord\GM 在(走过)小酒馆的门口

\chapter*{夜半歌声}\label{ybgs}
\addcontentsline{toc}{chapter}{夜半歌声}

(前奏)\chords{{\Cm} {\Amfive} {\Cm} {\Gm} {\Dm}{\Am}{\Bb}{\Cseven}}

只有在\upchord{\F}夜深　我和你\upchord{\Gm}才能　敞开灵\upchord{\Dm}魂　去释放天\upchord{\Am}真
\qquad \upchord{\Cm }

把温柔\upchord{\F }的吻　在夜半\upchord{\Gm}时分　化成歌\upchord{\Dm}声　\upchord{\Am}依偎你心\upchord{\GM}门

我祈求\upchord{\Cm }星辰　月儿来\upchord{\Dm}作证　用尽一\upchord{\Am}生　也愿意去\upchord{\Em}等

终会有\upchord{\Am}一天　把心愿\upchord{\Dm}完成　带着你\upchord{\F }飞奔\upchord{\GM }找永\upchord{\Cm }恒
\qquad \upchord{\Csthree} \qquad \upchord{\Cthree}

\backmatter

\end{document}
